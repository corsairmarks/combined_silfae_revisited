@addl_pop_blockers = 1

clear_holofrixit_system_capital_non_pop_blockers = {
	if = {
		limit = { owner = { NOT = { has_origin = origin_remnants } } }
		every_deposit = {
			limit = {
				is_blocker = yes
				OR = {
					is_deposit_type = d_tomb_world_wasteland
					is_deposit_type = d_strip_mine
					is_deposit_type = d_failing_infrastructure
				}
			}
			remove_deposit = yes
		}
	}
}

# add extra blockers - based on code from 01_start_of_game_effects.txt:183
# generate_start_deposits_and_blockers, which sets up the default blockers
# based on origin/civic/authority
generate_holofixit_system_capital_pop_blockers = {
	if = {
		limit = { owner = { has_origin = origin_post_apocalyptic } }
		while = {
			count = @addl_pop_blockers
			add_deposit = d_tomb_world_ruins
		}
	}
	else_if = {
		limit = { owner = { has_civic = civic_machine_servitor } }
		while = {
			count = @addl_pop_blockers
			add_deposit = d_unsupervised_settlement
		}
	}
	else_if = {
		limit = { owner = { has_authority = auth_hive_mind } }
		while = {
			count = @addl_pop_blockers
			add_deposit = d_collapsed_burrows
		}
	}
	else_if = {
		limit = { owner = { NOT = { has_origin = origin_machine } } }
		while = {
			count = @addl_pop_blockers
			add_deposit = d_decrepit_dwellings
		}
	}
}

# refer to 01_planetary_deposits.txt for the potential for each deposit
add_random_3_generator_district_deposit = {
	if = {
		limit = {
			OR = {
				has_planet_class = pc_arctic
				has_planet_class = pc_tundra
				has_planet_class = pc_savannah
				has_planet_class = pc_desert
				has_planet_class = pc_arid
			}
		}
		add_deposit = d_geothermal_vent
	}
	else_if = {
		limit = {
			OR = {
				has_planet_class = pc_gaia
				has_planet_class = pc_relic
			}
		}
		random_list = {
			50 = { add_deposit = d_underwater_vent }
			50 = { add_deposit = d_tempestous_mountain }
		}
	}
	else_if = {
		limit = {
			OR = {
				has_planet_class = pc_ocean
				has_planet_class = pc_nuked
			}
		}
		add_deposit = d_underwater_vent
	}
	else_if = {
		limit = {
			OR = {
				has_planet_class = pc_tropical
				has_planet_class = pc_alpine
				has_planet_class = pc_continental
			}
		}
		add_deposit = d_underwater_vent
	}
	else = {
		log = "unable to randomize size 3 generator deposit for class: [This.GetClassName]"
	}
}

# refer to 01_planetary_deposits.txt for the potential for each deposit
add_random_2_generator_district_deposit = {
	if = {
		limit = { is_wet = yes }
		add_deposit = d_rushing_waterfalls
	}
	else_if = {
		limit = {
			OR = {
				is_dry = yes
				has_planet_class = pc_gaia
				has_planet_class = pc_nuked
				has_planet_class = pc_relic
			}
		}
		random_list = {
			50 = {
				add_deposit = d_searing_desert
			}
			50 = {
				add_deposit = d_frozen_gas_lake
				modifier = {
					factor = 0
					has_planet_class = pc_nuked
				}
			}
		}
	}
	else = {
		log = "unable to randomize size 2 generator deposit for class: [This.GetClassName]"
	}
}

# refer to 01_planetary_deposits.txt for the potential for each deposit
add_random_1_generator_district_deposit = {
	if = {
		limit = { is_dry = yes }
		add_deposit = d_arid_highlands
	}
	else_if = {
		limit = {
			OR = {
				is_cold = yes
				is_wet = yes
				has_planet_class = pc_nuked
			}
		}
		add_deposit = d_hot_springs
	}
	else_if = {
		limit = { has_planet_class = pc_gaia }
		add_deposit = d_buzzing_plains
	}
	else = {
		log = "unable to randomize size 1 generator deposit for class: [This.GetClassName]"
	}
}