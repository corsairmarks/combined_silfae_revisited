namespace = horrorworm_evt

### Hidden Game Start Event
event = {
	id = horrorworm_evt.1
	hide_window = yes
	is_triggered_only = yes
	immediate = {
		every_playable_country = {
			limit = { has_country_flag = is_horrorworms }
			country_event = { id = horrorworm_evt.2 }
			home_planet = {
				planet_event = { id = horrorworm_evt.4 }
			}
		}
		every_system = {
			limit = { has_star_flag = horrorworm_system }
			every_system_planet = {
				limit = { has_planet_flag = horrorworm_system_capital }
				planet_event = { id = horrorworm_evt.3 }
			}
		}
	}
}

country_event = {
	id = horrorworm_evt.2
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		host_has_dlc = "Leviathans Story Pack"
		has_country_flag = is_horrorworms
	}
	immediate = { 
		give_technology = { tech = tech_hollowrift }
		give_technology = { tech = tech_energy_lance_1 }
	}
}

planet_event = {
	id = horrorworm_evt.3
	hide_window = yes
	is_triggered_only = yes
	pre_triggers = {
		has_owner = yes
		is_homeworld = yes
	}
	trigger = {
		has_planet_flag = horrorworm_system_capital
	}
	immediate = {
		generate_horrorworm_system_capital_blockers = yes
	}
}

planet_event = {
	id = horrorworm_evt.4
	hide_window = yes
	is_triggered_only = yes
	pre_triggers = {
		has_owner = yes
		is_homeworld = yes
	}
	trigger = {
		owner = { has_country_flag = is_horrorworms }
	}
	immediate = {
		generate_horrorworm_extra_armies = yes
	}
}