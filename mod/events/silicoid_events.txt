namespace = silicoids

# intentionally empty in case the original on_game_start action fires
event = {
	id = silicoids.1 
	hide_window = yes
	is_triggered_only = yes
	immediate = { }
}

# triggered by empire_init_add_technologies
country_event = {
	id = silicoids.2
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		has_valid_civic = civic_terraformers
	}
	immediate = {
		give_technology = {
			tech = tech_terrestrial_sculpting
			message = no
		}
	}
}

# triggered by empire_init_capital_planet
# ROOT = planet, capital
# FROM = species, founder
planet_event = {
	id = silicoids.3
	hide_window = yes
	is_triggered_only = yes
	pre_triggers = {
		has_owner = yes
		is_capital = yes
	}
	trigger = {
		owner = { any_owned_pop_species = { has_trait = trait_silicoid } }
	}
	immediate = {
		log = "begin silicoids.3 for [This.GetName]"
		if  = {
			limit = { owner = { has_origin = origin_shattered_ring } }
			if = {
				limit = { owner = { is_hive_empire = no } }
				add_district = district_rw_commercial
			}
			else = {
				add_district = district_rw_generator
			}
			add_deposit = d_segment_rubble_1_silicoid
			add_deposit = d_segment_rubble_2_silicoid
		}
		else_if = {
			limit = { is_planet_class = pc_hive }
			while = {
				limit = {
					num_districts = {
						type = district_farming_uncapped
						value < 1
					}
				}
				add_district = district_farming_uncapped
				remove_district = district_mining_uncapped
			}
		}
		# TODO: do I need to do anythign for habitats?
		else_if = {
			limit = { habitable_planet = yes }
			while = {
				limit = {
					num_districts = {
						type = district_farming
						value < 1
					}
				}
				add_district = district_farming
				remove_district = district_mining
			}
		}
	}
}

# flag mod as active
event = {
	id = silicoids.13
	hide_window = yes
	is_triggered_only = yes
	trigger = {
		NOT = { has_global_flag = silicoid_revisited_installed }
	}
	immediate = {
		set_global_flag = silicoid_revisited_installed
	}
}